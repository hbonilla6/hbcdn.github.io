function inicializarFormulariosHbHbx(e){let t=h(e).find("[data-val-required], [required]");function n(e){var t;e.is("[d-cv]")?showLoadingAlert(!1):showLoadingAlert(!0);let n=new FormData(e[0]);!function e(t){for(let n of(console.log("Contenido de FormData:"),t.entries()))console.log(n[0]+": "+n[1])}(n);let i=function e(t){let n={};return t.forEach((e,t)=>{n[t]?(Array.isArray(n[t])||(n[t]=[n[t]]),n[t].push(e)):n[t]=e}),n}(n);h.log("FormData como objeto:",i),$.ajax({url:e.attr("action"),method:e.attr("method"),data:n,processData:!1,contentType:!1,beforeSend:(t=e,function(e,n){let a=t.data("hb-before");"function"==typeof window[a]?window[a](e,n,t):function e(t){t.find("button").prop("disabled",!0)}(t)}),success:a(e,"hb-success",l),error:a(e,"hb-error",o),complete:a(e,"hb-complete",r)})}function a(e,t,n){let a=e.data(t);return console.log("Buscando funci\xf3n:",a,"en window:",typeof window[a]),function(...t){"function"==typeof window[a]?(console.log("Ejecutando funci\xf3n personalizada"),window[a](...t,e)):(console.log("Ejecutando funci\xf3n por defecto"),n(...t,e))}}function l(e,t,n,a){$(".modal").modal("hide"),$(".modal").hide(),$("body").removeClass("modal-open"),$(".modal-backdrop").remove(),showLoadingAlert(!1),Swal.fire({icon:"success",title:"Operaci\xf3n completada con \xe9xito",showConfirmButton:!1,timer:1500})}function o(e,t,n,a){showLoadingAlert(!1),function e(t){let n=$(t).closest(".modal");n.length&&(n.modal("hide"),n.removeClass("show"),n.css("display","none"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove(),$("body").css("padding-right","")),showLoadingAlert(!1)}(a),h.error("Error en la solicitud AJAX:",n);let l=e.responseText,o=document.createElement("div");o.innerHTML=l,l=o.innerHTML,Swal.fire({icon:"error",html:l||"Error desconocido",showConfirmButton:!0})}function r(e,t,n){n.find("button").prop("disabled",!1)}t.count>0&&(toastR({title:"Los elementos marcados con <b style='color: red; font-size: x-large;'>*</b> son obligatorios.",type:tToast.info}),t.each(e=>{let t=document.querySelector(`label[for="${e.id}"]:not(.label-not-required)`);t?t.classList.add("label-required"):e.id||h.warn('Elemento con `data-val-required` no tiene un atributo "id":',e)})),$(e).off("submit").on("submit",function(e){e.preventDefault();let t=$(this),a=t.data("hb-confirm")||"\xbfEst\xe1s seguro de realizar esta acci\xf3n?",l=[...this.querySelectorAll("[data-val-required], [required]")].filter(e=>!e.value.trim()||!e.checkValidity()||"true"===e.getAttribute("aria-invalid"));return l.length>0?(h.groupCollapsed("Campos Requeridos Inv\xe1lidos:"),l.forEach(e=>{let t=e.labels?.[0]?.textContent?.trim()||e.name?.trim()||"Sin etiqueta";h.error(`- ${t}`),e.focus()}),h.groupEnd(),!1):this.hasAttribute("d-cv")?(addCurrentPathToForm(this),n(t),!1):(Swal.fire({title:a,icon:"question",showCancelButton:!0,confirmButtonText:"S\xed, continuar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed?(addCurrentPathToForm(t[0]),n(t)):toast({title:"&#161;Acci&oacute;n cancelada!",icon:tToast.info})}),!1)}),window.showNotification=function(e,t="info"){if("undefined"!=typeof Swal){let n=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3});n.fire({icon:t,title:e})}else alert(e)},window.handleSuccessCloseModal3=function(){(function e(t){let n=$(t),a=()=>{let e=$(".modal.show").length,t=$(".modal-backdrop.fade.show"),l=t.length-e;l>0&&t.slice(-l).remove(),0===e&&($("body").removeClass("modal-open"),$("body").css("padding-right","")),n.off("hidden.bs.modal",a)};n.on("hidden.bs.modal",a),n.modal("hide")})("#modal-overlay3"),showNotification("Operaci\xf3n completada con \xe9xito","success")},window.handleSuccessCatalogo=function(){onSuccessAlert({successTitle:"Operaci\xf3n completada con \xe9xito",renderTarget:"#renderBody"})}}const actionPresets={post:{successTitle:"Registro Agregado",errorTitle:"Error al Agregar",confirmTitle:"\xbfDeseas agregar este registro?",confirmText:"Esta acci\xf3n agregar\xe1 un nuevo elemento",confirmColor:"#28a745",cancelColor:"#6c757d",confirmButtonText:"Agregar",cancelButtonText:"Cancelar"},put:{successTitle:"Registro Modificado",errorTitle:"Error al Modificar",confirmTitle:"\xbfDeseas modificar este registro?",confirmText:"Esta acci\xf3n actualizar\xe1 la informaci\xf3n existente",confirmColor:"#17a2b8",cancelColor:"#6c757d",confirmButtonText:"Modificar",cancelButtonText:"Cancelar"},delete:{successTitle:"Registro Eliminado",errorTitle:"Error al Eliminar",confirmTitle:"\xbfEst\xe1s seguro de eliminar?",confirmText:"Esta acci\xf3n no se puede deshacer",confirmColor:"#dc3545",cancelColor:"#6c757d",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar"}};function initializeAjaxForm(e){let t={successTitle:"Operaci\xf3n exitosa",errorTitle:"Ocurri\xf3 un error al enviar el formulario",confirmTitle:"\xbfEst\xe1s seguro?",confirmText:"\xbfDeseas enviar el formulario?",renderTarget:"#renderBody"};$(e).each(function(){let e=$(this)[0],n=$(e).attr("hb-action"),a=actionPresets[n]||{};$(e).attr("hb-success-title")||a.successTitle||t.successTitle;let l=$(e).attr("hb-error-title")||a.errorTitle||t.errorTitle,o=$(e).attr("hb-confirm-title")||a.confirmTitle||t.confirmTitle,r=$(e).attr("hb-confirm-text")||a.confirmText||t.confirmText,i=$(e).attr("hb-confirm-color")||a.confirmColor||"#4caf50",s=$(e).attr("hb-cancel-color")||a.cancelColor||"#d33",c=$(e).attr("hb-confirm-button-text")||a.confirmButtonText||"Confirmar",d=$(e).attr("hb-cancel-button-text")||a.cancelButtonText||"Cancelar",u=e.querySelectorAll("[data-val-required], [required]");u.length>0&&(toastR({title:"Los elementos marcados con <b style='color: red; font-size: x-large;'>*</b> son obligatorios.",type:tToast.info}),u.forEach(e=>{let t=document.querySelector(`label[for="${e.id}"]:not(.label-not-required)`);t?t.classList.add("label-required"):e.id||h.warn('Elemento con `data-val-required` no tiene un atributo "id":',e)})),$(e).submit(function(e){e.preventDefault();let n=e.target;$(n).valid();let a=[...n.querySelectorAll("[data-val-required], [required]")].filter(e=>!e.value.trim()||"function"==typeof isValidElement&&!isValidElement(e)||"true"===e.getAttribute("aria-invalid"));if(a.length>0)return h.groupCollapsed("Campos Requeridos Inv\xe1lidos:"),a.forEach((e,t)=>{let n=e.labels?.[0]?.textContent?.trim()||e.name?.trim()||"Sin etiqueta";h.error(`- ${n}`),0===t&&e.focus()}),h.groupEnd(),!1;swalConfirmation({type:tToast.confirm,title:o,text:r,options:{buttons:{cancel:{show:!0,text:d,color:s},confirm:{text:c,color:i},deny:{show:!1}},onConfirm:function(){showLoadingAlert(!0);let e=("function"!=typeof convertCase||convertCase())&&("function"!=typeof verifyIntlTelInput||verifyIntlTelInput());e?$.ajax({url:$(n).attr("action"),type:$(n).attr("method"),data:new FormData(n),processData:!1,contentType:!1,success:function(e){onSuccessAlert(t)},error:function(e,t,n){h.error("Error en la solicitud AJAX:",n);let a=e.responseText,o=document.createElement("div");o.innerHTML=a,a=o.innerHTML,Swal.fire({icon:"error",title:l,html:a||"Error desconocido",showConfirmButton:!0})}}):(showLoadingAlert(!1),h.warn("Fall\xf3 la validaci\xf3n de convertCase() o verifyIntlTelInput()"))}}})})})}function normalizeText(e,t=null){return(e=(e=(e=(e=e.normalize("NFD")).replace(/[\u0300-\u036f]/g,"")).replace(/[^a-zA-Z0-9\s]/g,"")).trim(),!1===t)?e.toLowerCase():!0===t?e.toUpperCase():e.trim()}function toDecimal(e,t=0,n=2){let a=Number.isInteger(n)&&n>=0?n:2,l=parseFloat(e);return isNaN(l)?Number(t.toExponential?Math.round(t+"e"+a)+"e-"+a:t):Number(Math.round(l+"e"+a)+"e-"+a)}function toInt(e,t=0){let n=parseInt(e,10);return isNaN(n)&&(n=t),n}function generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}function convertCase(){let e=document.getElementsByClassName("text-uppercase");for(let t of e)("INPUT"===t.tagName||"TEXTAREA"===t.tagName)&&(t.value=t.value.toUpperCase());return!0}function veriryIntlTelInput(){return h('input[type="tel"][data-jq-toggle="inputTel"]')?.each((e,t)=>{var n=window.intlTelInputGlobals.getInstance(t);let a=n.getNumber();a&&$(t).focus()}),!0}function requestAsync({url:e,id:t,method:n="GET",callback:a}){try{let l=toast({icon:tToast.info,position:tToasPosition.bottomStart,title:"Cargando...",timer:1e4}),o=document.getElementById(t);if(o){let r=o.tagName||"";switch(r){case"SELECT":o.innerHTML="<option disabled selected value=''>Cargando...</option>";break;case"DIV":"modalContent"===o.id||"modalContent2"===o.id||"modalContent3"===o.id?o.innerHTML='<div class="overlay"><i class="fas fa-2x fa-sync fa-spin"></i></div><div class="modal-header"><h4 class="modal-title">Cargando...</h4></div>':o.innerHTML="<progress></progress>";break;default:o.innerHTML="<progress></progress>"}}let i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState){let t=toastMap.get(l);if(t&&(t.close(),toastMap.delete(l)),200===i.status){if(o){o.innerHTML=i.responseText;if(null!=o.querySelector("form[data-signin]")){window.location.reload();return}}"function"==typeof a&&a(i)}else handleRequestError(e)}},i.open(n,e,!0),i.send()}catch(s){h.error(s),handleRequestError(e)}}function handleRequestError(e){let t=e.split("/");if(t.length<4){h.error(`Error: URL incompleta: ${e}`);return}let n=getSegmentWithoutQuery(t[4]),a=t[3];h.error(`${n} => ${a}`)}function getSegmentWithoutQuery(e){return e.split("?")[0]}function disableAllSubmitButtons(e,t=!0){h(e).find("[type='submit']").each((e,n)=>{n.disabled=t})}function getFullPath(){return window.location.pathname+window.location.search}function addCurrentPathToForm(e){if(!e||!(e instanceof HTMLFormElement)){h.error("Se requiere un elemento form v\xe1lido");return}let t=getFullPath(),n=e.querySelector('input[name="currentPath"]');if(n)n.value=t;else{let a=document.createElement("input");a.type="hidden",a.name="currentPath",a.value=t,e.insertBefore(a,e.firstChild)}}function validateForm(e){return(showLoadingAlert(!0),"loading"===document.readyState&&swalTimer({}),convertCase()&&veriryIntlTelInput())?(addCurrentPathToForm(e),showLoadingAlert(!1),e.submit()):(showLoadingAlert(!1),!1)}function confirmForm(e){let t=e.target;e.preventDefault();let n=[...t.querySelectorAll("[data-val-required], [required]")].filter(e=>!e.value.trim()||!isValidElement(e)||"true"===e.getAttribute("aria-invalid"));return n.length>0?(h.groupCollapsed("Campos Requeridos Inv\xe1lidos:"),n.forEach(e=>{let t=e.labels?.[0]?.textContent?.trim()||e.name?.trim()||"Sin etiqueta";h.error(`- ${t}`),e.focus()}),h.groupEnd(),!1):(swalConfirmation({type:tToast.confirm,title:"\xbfDesea confirmar?",options:{buttons:{deny:{show:!1},confirm:{color:"#4caf50"}},onConfirm:function(){validateForm(t)}}}),!1)}function checkRequiredElements(e){let t=e.querySelectorAll("[data-val-required], [required]");t.length>0&&(toastR({title:"Los elementos marcados con <b style='color: red; font-size: x-large;'>*</b> son obligatorios.",type:tToast.info}),t.forEach(e=>{let t=document.querySelector(`label[for="${e.id}"]:not(.label-not-required)`);t?t.classList.add("label-required"):e.id||h.warn('Elemento con `data-val-required` no tiene un atributo "id":',e)})),e.addEventListener("submit",confirmForm)}function isValidElement(e){return e.checkValidity()}function onSelect2(){$.fn.select2.defaults.set("language","es");$("select.select2").select2(),$(".select2").on("select2:selecting",function(e){h(`[data-valmsg-for="${e.params.args.data.element.closest("select").name}"]`)?.html("")})}function simplePostUnobtrusiveAjax(){h("*[data-post-simple='true']").attr("data-ajax","true").attr("data-ajax-method","POST").attr("data-ajax-success","onSuccessAlert").attr("data-ajax-begin","onBegin").attr("data-ajax-complete","hideLoadingAlert")}function onSelect2Individual(e){try{let t=!1,n=$(`select.select2#${e}`),a=n.hasClass("select2-hidden-accessible");a&&(t=n.select2("isOpen")),n.select2(),t&&n.select2("open")}catch(l){}}function initialFunctions(){h("form[data-verify-form='true']").each(e=>checkRequiredElements(e)),h("input:not([data-exclude-apply]), select:not([data-exclude-apply]), textarea:not([data-exclude-apply]), [contenteditable]:not([data-exclude-apply])").on("keydown",handleEnterAsTab),handleNumberInput(),applyAttributes(),initImageUpload(),initializeAjaxForm("form[hb-catalog]"),inicializarFormulariosHbHbx("form[hb-hbx]"),onSelect2(),generatehbqrs()}function utilityModal(e,t,n="modalContent"){requestAsync({url:e,id:n,callback(){h.info("completed utility modal"),initialFunctions();let e=document.getElementById(n),a=e?.closest(".modal");if(!a){h.warn(`Modal element not found for container ID "${n}"`);return}if("undefined"!=typeof bootstrap){let l="none"!==window.getComputedStyle(a).display&&a.classList.contains("show")&&null!==document.querySelector(".modal-backdrop");if(l)h.info("Modal already visible; skipping show()");else{cleanModalState(a);let o=new bootstrap.Modal(a);o.show(),h.info("Modal shown successfully")}}else h.warn("Bootstrap is not available");let r=a.querySelector('input[type="text"]:not([type="hidden"]):not([disabled]), textarea:not([disabled])');if(r){if(r.focus(),r.setSelectionRange){let i=r.value.length;r.setSelectionRange(i,i)}r.scrollIntoView({behavior:"smooth",block:"start"})}else h.warn("No focusable elements found in form");void 0!==$.validator&&$.validator.unobtrusive&&$.validator.unobtrusive.parse(`#${n}`),"function"==typeof t&&t()}})}function cleanModalState(e){document.querySelectorAll(".modal-backdrop").forEach(e=>e.remove()),e.classList.contains("show")&&"none"===window.getComputedStyle(e).display&&(e.classList.remove("show"),e.style.display="",e.removeAttribute("aria-modal"),document.body.classList.remove("modal-open"),document.body.style.removeProperty("padding-right"),document.body.style.removeProperty("overflow"))}function verifyWhatsApp(e,t=null){t||(t=e.value);let n=String(t).replace(/[\s-]/g,""),a=h(e).closest(".icon-input-container").find(".input-icon").get(0);n?h(a).removeClass("text-dark").addClass("text-success,text-shadow-success").attr("target","_blank").attr("href",`https://wa.me/${n}`):h(a).removeClass("text-success,text-shadow-success").addClass("text-dark").removeAttr("target").attr("href","#")}function formatInputOnBlur(e,t=2){let n=e.value.replace(/\D/g,"");n.length>0&&(n=n.padStart(t,"0")),e.value=n}function togglePassword(e,t){var n=e.previousElementSibling;t?n.setAttribute("type","text"):n.setAttribute("type","password")}function onBegin(){}let alertLoading;function showLoadingAlert(e=!0){e?(alertLoading=Swal.fire({html:`
        <div class="loading-container">
          <p class="loading-text">Cargando<span class="dots"></span></p>
          <div class="loading-animation">
            <div class="spinner">
              <div class="bounce1"></div>
              <div class="bounce2"></div>
              <div class="bounce3"></div>
            </div>
          </div>
        </div>
      `,showConfirmButton:!1,allowOutsideClick:!1,didOpen(){let e=document.createElement("style");e.innerHTML=`
          .loading-container {
            padding: 10px;
          }
          .loading-text {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
          }
          .dots:after {
            content: '.';
            animation: dots 1.5s steps(5, end) infinite;
          }
          @keyframes dots {
            0%, 20% {
              content: '.';
            }
            40% {
              content: '..';
            }
            60%, 80% {
              content: '...';
            }
            100% {
              content: '';
            }
          }
          .loading-animation {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
          }
          .spinner {
            margin: 0 auto;
            width: 70px;
            text-align: center;
          }
          .spinner > div {
            width: 18px;
            height: 18px;
            background-color: #3085d6;
            border-radius: 100%;
            display: inline-block;
            margin: 0 3px;
            animation: sk-bouncedelay 1.4s infinite ease-in-out both;
          }
          .spinner .bounce1 {
            animation-delay: -0.32s;
          }
          .spinner .bounce2 {
            animation-delay: -0.16s;
          }
          @keyframes sk-bouncedelay {
            0%, 80%, 100% { 
              transform: scale(0);
            } 
            40% { 
              transform: scale(1.0);
            }
          }
        `,document.head.appendChild(e)}}),document.querySelectorAll("input[type='submit'], button[type='submit']").forEach(e=>{e.setAttribute("disabled",!0)})):(alertLoading&&Swal.close(),document.querySelectorAll("input[type='submit'], button[type='submit']").forEach(e=>{e.removeAttribute("disabled")}))}function onSuccessAlert(e){let t=getFullPath();return $.ajax({url:t,type:"GET",data:{isPartial:!0},success:function(t){h(e.renderTarget).empty().append(t),$(".modal").modal("hide"),$(".modal").hide(),$("body").removeClass("modal-open"),$(".modal-backdrop").remove(),showLoadingAlert(!1),Swal.fire({icon:"success",title:e.successTitle,text:e.successMsg,showConfirmButton:!1,timer:1500})},error:function(e){h.error("Error",e)}}),!1}function hideLoadingAlert(){return showLoadingAlert(!1),!1}function toDecimal(e,t=0,n=2){n=Math.max(0,Math.trunc(n));let a=parseFloat(e);return isNaN(a)&&(a=t),parseFloat(a.toFixed(n))}function toInt(e,t=0){let n=parseInt(e,10);return isNaN(n)&&(n=t),n}function applyAttributes(){h("*[data-disabled='true']")?.disabled(!0),h("*[data-checked='true']")?.checked(!0),h("*[data-selected='true']")?.attr("selected","selected"),h("*[data-readonly='true']")?.readonly(!0),h("*[data-hidden='true']")?.hidden(!0),h("*[data-interactive='false']")?.pointerEvents(!1)}const actionFunctions={};function addActionFunction(e,t){"string"==typeof e&&"function"==typeof t?actionFunctions[e]=t:h.error("El nombre de la funci\xf3n debe ser un string y la implementaci\xf3n debe ser una funci\xf3n.")}function handleCards(e,t=[]){if(e){let n=document.getElementById(e);if(n){n.classList.remove("collapsed-card");let a=n.querySelector(".card-body");a&&(a.style.display="block");let l=n.querySelector(".card-tools .btn-tool i");l&&(l.classList.remove("fa-plus"),l.classList.add("fa-minus"))}}let o=0===t.length?document.querySelectorAll(".card"):t;o.forEach(t=>{let n="string"==typeof t?document.getElementById(t):t;if(n&&n!==document.getElementById(e)){n.classList.add("collapsed-card");let a=n.querySelector(".card-body");a&&(a.style.display="none");let l=n.querySelector(".card-tools .btn-tool i");l&&(l.classList.remove("fa-minus"),l.classList.add("fa-plus"))}})}function openCard(e){if(e){let t=document.getElementById(e);if(t){t.classList.remove("collapsed-card");let n=t.querySelector(".card-body");n&&(n.style.display="block");let a=t.querySelector(".card-tools .btn-tool i");a&&(a.classList.remove("fa-plus"),a.classList.add("fa-minus"))}}}function getFocusableElements(){return Array.from(document.querySelectorAll('input:not([disabled]):not([type="hidden"]):not([data-exclude-apply]),select:not([disabled]):not([type="hidden"]):not([data-exclude-apply]),textarea:not([disabled]):not([type="hidden"]):not([data-exclude-apply])')).filter(e=>{let t=window.getComputedStyle(e);return"hidden"!==t.visibility&&"none"!==t.display&&e.offsetWidth>0&&e.offsetHeight>0})}function handleEnterAsTab(e){if("Enter"===e.key){e.preventDefault();let t=e.target,n=t.getAttribute("data-next-element-id"),a=t.getAttribute("data-function-before-navigation"),l=[],o=t.getAttribute("data-function-parameters");if(o)try{l=JSON.parse(o.replace(/'/g,'"'))}catch(r){h.error("Error parsing function parameters:",r)}a&&actionFunctions[a]&&actionFunctions[a](...l);let i;if(n)i=document.getElementById(n);else{let s=getFocusableElements(),c=s.indexOf(t);i=s[c+1]||s[0]}i&&(i.focus(),i instanceof HTMLInputElement&&["text","search","url","tel","password"].includes(i.type)&&i.select())}}function handleNumberInput(){h("input[hbnumber]").on("input",e=>{let t=e.target,n=toDecimal(t.value),a=t.hasAttribute("max")?toDecimal(t.max):null,l=t.hasAttribute("min")?toDecimal(t.min):null;""!==t.value&&!isNaN(n)&&(null!==a&&n>a&&(t.value=a),null!==l&&n<l&&(t.value=l))})}function initImageUpload(){let e=h(".hb-image-upload"),t=e.find(".hb-image-preview"),n=e.find('input[type="file"]'),a=t.data("placeholder"),l=null;function o(e){l&&URL.revokeObjectURL(l),l=e instanceof Blob?URL.createObjectURL(e):e,t.attr("src",l)}function r(){l&&(URL.revokeObjectURL(l),l=null),t.attr("src",a)}r(),n.on("change",function(e){let t=e.target.files[0];t?o(t):r()}),t.on("dragover",function(e){let a=n.next("label");if(a.is(":hidden")){e.preventDefault();return}e.preventDefault(),t.addClass("hb-dragover")}),t.on("drop",function(e){let a=n.next("label");if(a.is(":hidden")){e.preventDefault();return}e.preventDefault(),t.removeClass("hb-dragover");let l=e?.originalEvent?.dataTransfer?.files[0];l&&l.type.startsWith("image/")&&(o(l),n.prop("files",e.originalEvent.dataTransfer.files))})}function initMultiHBFiles(e=".hb-upload-container"){var t;let n=document.querySelector(e),a=n.querySelector(".hb-file-input-container"),l=a.querySelector(".hb-file-drop-area"),o=a.querySelector('input[type="file"]'),r=a.querySelector("button"),i=n.querySelector(".hb-preview-container"),s=JSON.parse(i.getAttribute("hb-files")||"[]"),c=document.getElementById("hb-fullscreenModal"),d=document.getElementById("hb-modalContent"),u=document.getElementById("hb-fileDetails"),f=document.getElementById("hb-closeModal"),p=document.getElementById("hb-dragHandle"),m=[],g=new Set;function y(e){e.preventDefault(),e.stopPropagation()}function b(){l.classList.add("highlight")}function v(){l.classList.remove("highlight")}function x(){c.style.display="none",d.innerHTML="",f.style.top="15px",f.style.left="auto",f.style.right="15px",u.style.top="auto",u.style.left="0",u.style.right="0",u.style.bottom="15px",document.body.classList.remove("hb-body-no-scroll")}function E(e){return`${e.name}-${e.size}`}function _(e){if(!e.length)return;let t=[];if(e.forEach(e=>{let n=E(e);if(g.has(n)){console.log(`Archivo duplicado ignorado: ${e.name}`);return}if(e.size<10){toastr.error(`El archivo "${e.name}" es demasiado peque\xf1o. Tama\xf1o m\xednimo: 10 bytes`);return}if(e.size>104857600){toastr.error(`El archivo "${e.name}" es demasiado grande. Tama\xf1o m\xe1ximo: 100 MB`);return}g.add(n),t.push(e),console.log(`Archivo v\xe1lido agregado: ${e.name} (${e.size} bytes)`)}),0===t.length){console.log("No hay archivos v\xe1lidos en esta selecci\xf3n"),L();return}m=[...m,...t],t.forEach(e=>{w(e)}),L(),console.log(`${t.length} archivos v\xe1lidos procesados. Total: ${m.length}`)}function C(){try{let e=new DataTransfer;o.files=e.files,console.log("Input de archivos limpiado completamente")}catch(t){console.error("Error al limpiar el input de archivo:",t);let n=o.cloneNode(!0);o.parentNode.replaceChild(n,o),o=a.querySelector('input[type="file"]'),o.addEventListener("change",function(e){e.target.files.length>0&&_(Array.from(e.target.files))})}}function L(){try{let e=new DataTransfer;m.forEach(t=>{e.items.add(t)}),o.files=e.files,console.log(`Input actualizado con ${o.files.length} archivos v\xe1lidos.`)}catch(t){console.error("Error al actualizar el input de archivo:",t)}}function w(e,t=null){var n;let l=E(e),o=document.createElement("div");if(o.className="hb-preview-item",o.id=`hb-preview-${l}`,o.dataset.filename=e.name,null!==t){let r=document.createElement("input");r.type="hidden",r.name=`FilesToKeep[${t}]`,r.value=e.name,r.className="file-to-keep",o.appendChild(r)}if(!a.hasAttribute("hidden")){let s=document.createElement("button");s.type="button",s.className="hb-delete-button",s.innerHTML='<i class="fas fa-times"></i>',s.addEventListener("click",function(e){e.stopPropagation(),m=m.filter(e=>E(e)!==l),g.delete(l),o.remove(),L(),function e(){let t=document.querySelectorAll(".file-to-keep");t.forEach((e,t)=>{e.name=`FilesToKeep[${t}]`})}()}),o.appendChild(s)}let c=(n=e,["image/","application/pdf","video/","audio/","text/",].some(e=>n.type.startsWith(e)));if(c){let d=document.createElement("button");d.type="button",d.className="hb-fullscreen-button",d.innerHTML='<i class="fas fa-expand"></i>',d.addEventListener("click",function(t){t.stopPropagation(),T(e)}),o.appendChild(d)}else{let u=document.createElement("a");u.className="hb-fullscreen-button",u.innerHTML='<i class="fas fa-download"></i>',u.href=URL.createObjectURL(e),u.download=e.name,u.addEventListener("click",function(e){e.stopPropagation()}),o.appendChild(u)}let f;if(e.type.startsWith("image/")){let p=document.createElement("img");p.src=URL.createObjectURL(e),f=p}else{let y=document.createElement("div");y.className="hb-file-icon";let b="fas fa-file";e.type.includes("pdf")?b="fas fa-file-pdf":e.type.includes("word")||e.name.endsWith(".doc")||e.name.endsWith(".docx")?b="fas fa-file-word":e.type.includes("excel")||e.name.endsWith(".xls")||e.name.endsWith(".xlsx")?b="fas fa-file-excel":e.type.includes("video")?b="fas fa-file-video":e.type.includes("audio")?b="fas fa-file-audio":e.type.includes("zip")||e.type.includes("rar")||e.type.includes("archive")?b="fas fa-file-archive":e.type.includes("text")&&(b="fas fa-file-alt");let v=document.createElement("i");v.className=b,y.appendChild(v);let x=document.createElement("span");x.textContent=function e(t){if(t.type){if(t.type.includes("spreadsheetml")||t.type.includes("excel"))return"EXCEL";if(t.type.includes("wordprocessingml")||t.type.includes("document"))return"WORD";if(t.type.includes("presentationml")||t.type.includes("powerpoint"))return"POWERPOINT";let n=t.type.split("/");return n.length>1?n[1].toUpperCase():n[0].toUpperCase()}let a=t.name.split(".").pop().toLowerCase();return({pdf:"PDF",doc:"WORD",docx:"WORD",xls:"EXCEL",xlsx:"EXCEL",ppt:"POWERPOINT",pptx:"POWERPOINT",zip:"ZIP",rar:"RAR",txt:"TEXT"})[a]||"FILE"}(e),y.appendChild(x),f=y}o.appendChild(f);let _=document.createElement("div");_.className="hb-file-name",_.textContent=e.name,_.title=e.name,o.appendChild(_),c?o.addEventListener("click",function(){T(e)}):o.addEventListener("click",function(){let t=document.createElement("a");t.href=URL.createObjectURL(e),t.download=e.name,document.body.appendChild(t),t.click(),document.body.removeChild(t)}),i.appendChild(o)}function T(e){if(d.innerHTML="",f.style.top="15px",f.style.left="auto",f.style.right="15px",u.style.top="auto",u.style.left="0",u.style.right="0",u.style.bottom="15px",u.textContent=`${e.name} (${function e(t){if(0===t)return"0 Bytes";let n=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,n)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][n]}(e.size)})`,e.type.startsWith("image/")){let t=document.createElement("img");t.src=URL.createObjectURL(e),d.appendChild(t)}else if("application/pdf"===e.type){let n=document.createElement("div");n.className="hb-pdf-container";let a=document.createElement("iframe");a.src=URL.createObjectURL(e),n.appendChild(a),d.appendChild(n)}else if(e.type.startsWith("video/")){let l=document.createElement("video");l.controls=!0,l.autoplay=!1,l.style.maxWidth="95%",l.style.maxHeight="95%";let o=document.createElement("source");o.src=URL.createObjectURL(e),o.type=e.type,l.appendChild(o),d.appendChild(l)}else if(e.type.startsWith("audio/")){let r=document.createElement("div");r.style.width="80%",r.style.maxWidth="600px",r.style.backgroundColor="rgba(255, 255, 255, 0.1)",r.style.padding="20px",r.style.borderRadius="10px";let i=document.createElement("audio");i.controls=!0,i.style.width="100%";let s=document.createElement("source");s.src=URL.createObjectURL(e),s.type=e.type,i.appendChild(s),r.appendChild(i),d.appendChild(r)}else if(e.type.startsWith("text/")){let p=document.createElement("div");p.style.width="90%",p.style.height="90%",p.style.backgroundColor="white",p.style.padding="20px",p.style.borderRadius="8px",p.style.overflow="auto";let m=new FileReader;m.onload=function(e){let t=document.createElement("pre");t.style.textAlign="left",t.style.whiteSpace="pre-wrap",t.style.wordBreak="break-word",t.textContent=e.target.result,p.appendChild(t)},m.readAsText(e),d.appendChild(p)}else{let g=document.createElement("div");g.className="hb-file-preview";let y=document.createElement("p");y.textContent="Este tipo de archivo no se puede previsualizar directamente en el navegador.",y.style.marginBottom="20px",g.appendChild(y);let b=document.createElement("button");b.type="button",b.className="hb-external-open-button",b.innerHTML='<i class="fas fa-external-link-alt"></i> Abrir en nueva ventana',b.addEventListener("click",function(){let t=URL.createObjectURL(e);window.open(t,"_blank")}),g.appendChild(b),d.appendChild(g)}document.body.classList.add("hb-body-no-scroll"),c.style.display="flex"}!function e(){if(!s||0===s.length)return;i.removeAttribute("hb-files");let t=document.querySelector(".hb-loading-indicator");t&&t.remove();let n=document.createElement("div");n.style.width="100%",n.style.marginBottom="20px",i.parentNode.insertBefore(n,i);let a=document.createElement("div");a.className="hb-loading-indicator",a.innerHTML=`
    <div class="hb-spinner"></div>
    <p>Cargando archivos, por favor espere...</p>
    <p class="hb-loading-count">0/${s.length} archivos cargados</p>
  `,n.appendChild(a);let l=0,o=a.querySelector(".hb-loading-count"),r=s.map((e,t)=>{let n=new Date(e.LastModified);return fetch(e?.url).then(e=>e.blob()).then(a=>{let r=new File([a],e?.fileName,{type:a.type,lastModified:n.getTime()}),i=E(r);g.has(i)||(m.push(r),g.add(i),w(r,t)),l++,o.textContent=`${l}/${s.length} archivos cargados`}).catch(t=>{console.error(`Error al cargar el archivo existente ${e?.fileName}:`,t),l++,o.textContent=`${l}/${s.length} archivos cargados`})});Promise.all(r).finally(()=>{n.remove(),L()})}(),r.addEventListener("click",function(){o.click()}),o.addEventListener("change",function(e){e.target.files.length>0&&_(Array.from(e.target.files))}),["dragenter","dragover","dragleave","drop"].forEach(e=>{l.addEventListener(e,y,!1)}),["dragenter","dragover"].forEach(e=>{l.addEventListener(e,b,!1)}),["dragleave","drop"].forEach(e=>{l.addEventListener(e,v,!1)}),l.addEventListener("drop",function(e){let t=e.dataTransfer,n=t.files;_(Array.from(n))}),window.getUploadedFiles=function(){return m},u.style.cursor="ns-resize",u.style.zIndex="102";let A,q,k,S,B;A=!1,q=0,k=0,S=0,B=0,p.addEventListener("mousedown",function(e){document.body.style.userSelect="none",A=!1,q=e.clientX,k=e.clientY;let t=f.getBoundingClientRect(),n=c.getBoundingClientRect();S=q-t.left,B=k-t.top;let a=e=>{let a=e.clientX-q,l=e.clientY-k;if(Math.abs(a)>5||Math.abs(l)>5){A=!0;let o=Math.min(Math.max(0,e.clientX-n.left-S),n.width-t.width),r=Math.min(Math.max(0,e.clientY-n.top-B),n.height-t.height);f.style.left=`${o}px`,f.style.top=`${r}px`,f.style.right="auto"}},l=()=>{A||x(),document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",l),document.body.style.userSelect=""};document.addEventListener("mousemove",a),document.addEventListener("mouseup",l)}),p.addEventListener("touchstart",function(e){if(document.body.style.userSelect="none",1!==e.touches.length)return;A=!1,q=e.touches[0].clientX,k=e.touches[0].clientY;let t=f.getBoundingClientRect(),n=c.getBoundingClientRect();S=q-t.left,B=k-t.top;let a=e=>{let a=e.touches[0].clientX-q,l=e.touches[0].clientY-k;if(Math.abs(a)>5||Math.abs(l)>5){A=!0;let o=Math.min(Math.max(0,e.touches[0].clientX-n.left-S),n.width-t.width),r=Math.min(Math.max(0,e.touches[0].clientY-n.top-B),n.height-t.height);f.style.left=`${o}px`,f.style.top=`${r}px`,f.style.right="auto"}},l=()=>{A||x(),document.removeEventListener("touchmove",a),document.removeEventListener("touchend",l),document.body.style.userSelect=""};document.addEventListener("touchmove",a,{passive:!1}),document.addEventListener("touchend",l)});let M,D;M=!1,(t=u).addEventListener("mousedown",function(e){M=!0,D=e.clientY-t.getBoundingClientRect().top,e.preventDefault()}),document.addEventListener("mousemove",function(e){if(M&&t===document.getElementById("hb-fileDetails")){let n=e.clientY-D,a=window.innerHeight-t.offsetHeight;t.style.bottom="auto",t.style.top=`${Math.min(Math.max(0,n),a)}px`}}),document.addEventListener("mouseup",function(){M=!1}),t.addEventListener("touchstart",function(e){M=!0,D=e.touches[0].clientY-t.getBoundingClientRect().top,e.preventDefault()}),document.addEventListener("touchmove",function(e){if(M&&t===document.getElementById("hb-fileDetails")){let n=e.touches[0].clientY-D,a=window.innerHeight-t.offsetHeight;t.style.bottom="auto",t.style.top=`${Math.min(Math.max(0,n),a)}px`}},{passive:!1}),document.addEventListener("touchend",function(){M=!1})}class HBFormValidator{constructor(e={}){this.config={focusOnInvalid:!1,showErrors:!0,onError:null,...e},this.validateFields=this.validateFields.bind(this),this.showFieldError=this.showFieldError.bind(this)}validateFields(e){let t={...this.config,selectors:[],...e},n=[],a=[];"function"==typeof t.selectors?a=t.selectors():"string"==typeof t.selectors?a=[t.selectors]:Array.isArray(t.selectors)&&(a=t.selectors);let l=a.every(e=>{let a=$(e),l=a.val(),o=a.prop("type"),r=a.attr("name")||a.attr("id")||e,i=!0,s="";if(0===a.length)return console.error(`Campo '${e}' no encontrado en el DOM`),!1;if(a.prop("disabled")||a.prop("readonly"))return!0;let c=void 0!==a.attr("hb-required")||a.hasClass("hb-required")||a.closest(".form-group").find(".required-mark").length>0;if(c&&(null===l||""===l.trim())&&(i=!1,s=`El campo ${r} es obligatorio`),!i)return t.focusOnInvalid&&a.focus(),n.push({field:r,message:s,element:a}),!1;if(null===l||""===l.trim())return!0;switch(o){case"number":case"range":let d=toDecimal(l),u=void 0!==a.attr("min")?parseFloat(a.attr("min")):null,f=void 0!==a.attr("max")?parseFloat(a.attr("max")):null,p=void 0!==a.attr("step")?parseFloat(a.attr("step")):null;if(isNaN(d))i=!1,s=`El campo ${r} debe ser un n\xfamero v\xe1lido`;else if(null!==u&&d<u)i=!1,s=`El valor debe ser mayor o igual a ${u}`;else if(null!==f&&d>f)i=!1,s=`El valor debe ser menor o igual a ${f}`;else if(null!==p&&p>0){let m=(d-(null!==u?u:0))%p;m>0&&Math.abs(m-p)>1e-5&&(i=!1,s=`El valor debe ser un m\xfaltiplo de ${p} desde ${null!==u?u:0}`)}break;case"date":case"datetime":case"datetime-local":case"month":case"week":case"time":let g,y;if("date"===o?g="YYYY-MM-DD":"datetime"===o||"datetime-local"===o?g="YYYY-MM-DDTHH:mm:ss":"month"===o?g="YYYY-MM":"week"===o?g="YYYY-[W]WW":"time"===o&&(g="HH:mm"),(y=moment(l,g)).isValid()){let b=a.attr("min")?moment(a.attr("min"),g):null;null!==b&&b.isValid()&&y.isBefore(b)&&(i=!1,s=`La fecha debe ser igual o posterior a ${b.format(g)}`);let v=a.attr("max")?moment(a.attr("max"),g):null;null!==v&&v.isValid()&&y.isAfter(v)&&(i=!1,s=`La fecha debe ser igual o anterior a ${v.format(g)}`)}else i=!1,s=`El formato de fecha/hora no es v\xe1lido`;break;case"email":let x=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;if(x.test(l)||(i=!1,s=`El email no tiene un formato v\xe1lido`),i&&void 0!==a.attr("multiple")){let E=l.split(/\s*,\s*/);for(let _ of E)if(!x.test(_)){i=!1,s=`Uno o m\xe1s emails no tienen un formato v\xe1lido`;break}}break;case"url":try{new URL(l)}catch(C){i=!1,s=`La URL no tiene un formato v\xe1lido`}break;case"tel":let L=a.attr("pattern")||/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/;"string"==typeof L?RegExp(L).test(l)||(i=!1,s=`El tel\xe9fono no tiene un formato v\xe1lido`):L.test(l)||(i=!1,s=`El tel\xe9fono no tiene un formato v\xe1lido`);break;case"password":let w=a.attr("minlength")?parseInt(a.attr("minlength")):8,T=a.attr("data-strength-pattern")||/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;l.length<w?(i=!1,s=`La contrase\xf1a debe tener al menos ${w} caracteres`):a.attr("data-validate-strength")&&"string"==typeof T&&!RegExp(T).test(l)&&(i=!1,s=a.attr("data-strength-message")||`La contrase\xf1a debe incluir may\xfasculas, min\xfasculas, n\xfameros y caracteres especiales`);let A=a.attr("data-match-field");if(A){let q=h(A).val();l!==q&&(i=!1,s=`Las contrase\xf1as no coinciden`)}break;case"file":let k=a[0].files;if(c&&(!k||0===k.length))i=!1,s="Debe seleccionar un archivo";else if(k&&k.length>0){let S=a.attr("data-max-files")?parseInt(a.attr("data-max-files")):a.attr("multiple")?null:1;null!==S&&k.length>S&&(i=!1,s=`Puede seleccionar m\xe1ximo ${S} archivo(s)`);let B=a.attr("accept");if(B){let M=B.split(",").map(e=>e.trim().toLowerCase());for(let D=0;D<k.length;D++){let I=k[D],F=!1;for(let R of M)if(R.startsWith(".")){let z="."+I.name.split(".").pop().toLowerCase();if(z===R){F=!0;break}}else if(R.includes("/")){let[H,O]=R.split("/"),[Y,N]=I.type.split("/");if(("*"===H||Y===H)&&("*"===O||N===O)){F=!0;break}}if(!F){i=!1,s=`Uno o m\xe1s archivos no tienen un formato permitido`;break}}}let P=a.attr("data-max-size")?parseInt(a.attr("data-max-size")):null;if(null!==P){for(let j=0;j<k.length;j++)if(k[j].size>P){i=!1;let W=Math.round(P/1048576*100)/100;s=`El tama\xf1o m\xe1ximo por archivo es de ${W} MB`;break}}}break;case"checkbox":c&&!a.prop("checked")&&(i=!1,s="Este campo es obligatorio");let U=a.attr("data-group");if(U){let V=a.attr("data-min-checked")?parseInt(a.attr("data-min-checked")):null,X=a.attr("data-max-checked")?parseInt(a.attr("data-max-checked")):null;if(null!==V||null!==X){let Z=document.querySelectorAll(`input[type="checkbox"][data-group="${U}"]:checked`).length;null!==V&&Z<V?(i=!1,s=`Debe seleccionar al menos ${V} opciones`):null!==X&&Z>X&&(i=!1,s=`Puede seleccionar m\xe1ximo ${X} opciones`)}}break;case"radio":if(c){let G=a.attr("name"),Q=document.querySelector(`input[type="radio"][name="${G}"]:checked`);Q||(i=!1,s=`Debe seleccionar una opci\xf3n`)}break;default:let K=a.attr("minlength")?parseInt(a.attr("minlength")):null,J=a.attr("maxlength")?parseInt(a.attr("maxlength")):null;null!==K&&l.length<K?(i=!1,s=`Debe tener al menos ${K} caracteres`):null!==J&&l.length>J&&(i=!1,s=`Debe tener m\xe1ximo ${J} caracteres`);let ee=a.attr("pattern");ee&&!RegExp(`^${ee}$`).test(l)&&(i=!1,s=a.attr("title")||`El formato no es v\xe1lido`);let et=a.attr("list");if(et){let en=document.getElementById(et);if(en){let ea=Array.from(en.querySelectorAll("option")).map(e=>e.value);!ea.includes(l)&&a.attr("data-strict-datalist")&&(i=!1,s="Debe seleccionar un valor de la lista")}}if(a.attr("data-validation-function"))try{let el=Function("value","element",a.attr("data-validation-function")),eo=el(l,a[0]);!0!==eo&&(i=!1,s="string"==typeof eo?eo:a.attr("data-validation-message")||`Validaci\xf3n personalizada fallida`)}catch(er){console.error(`Error en la validaci\xf3n personalizada del campo ${r}:`,er)}}return i&&a[0]&&"function"==typeof a[0].checkValidity&&!a[0].checkValidity()&&(i=!1,s=a[0].validationMessage||`El campo no es v\xe1lido`),!!i||(n.push({field:r,message:s,element:a}),t.focusOnInvalid&&a.focus(),t.showErrors&&this.showFieldError(a,s),!1)});return!l&&n.length>0&&"function"==typeof t.onError&&t.onError(n),l}areFieldsValid(e,t=!1){return this.validateFields({selectors:e,focusOnInvalid:t})}showFieldError(e,t){let n=e.closest(".form-group");n.find(".validation-error").remove(),e.addClass("is-invalid");let a=$(`<div class="validation-error text-danger small mt-1">${t}</div>`);n.find("label").length>0?a.insertAfter(e):n.append(a),e.one("input change",function(){e.removeClass("is-invalid"),n.find(".validation-error").fadeOut(300,function(){$(this).remove()})})}static create(e={}){return new HBFormValidator(e)}}function createInputField({type:e,className:t,name:n,value:a,min:l,max:o,readonly:r}){e=e?escapeHTML(e):"text",t=t?escapeHTML(t):"",n=n?escapeHTML(n):"",a=null!=a?escapeHTML(a.toString()):"";let i=`<input type="${e}"`;return t&&(i+=` class="${t}"`),n&&(i+=` name="${n}"`),""!==a&&(i+=` value="${a}"`),void 0!==l&&(i+=` min="${l}"`),void 0!==o&&(i+=` max="${o}"`),r&&(i+=' readonly="readonly"'),i+=">"}function escapeHTML(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function reindexTable(e,t){h(`#${e} tr`).each(function(e,n){h(n).find(`input[name^="${t}["]`).each(function(){let n=h(this).attr("name"),a=n.replace(RegExp(`${t}\\[\\d+\\]`),`${t}[${e}]`);h(this).attr("name",a)})})}function generatehbqrs(){"function"==typeof hbqr&&h("[hbQR]").each(function(){let e=h(this),t=e.attr("hbQR"),n=parseInt(e.attr("size"))||200,a=e.attr("level")||"M",l=hbqr(0,a);l.addData(t),l.make();let o=l.createImgTag(Math.max(1,Math.floor(n/25)));e.html(o)})}function validateDateAndSubmit(e,t){let n=$(e),a=moment(n.val(),"YYYY-MM-DD"),l=moment(n.attr("min"),"YYYY-MM-DD"),o=moment(n.attr("max"),"YYYY-MM-DD");if(!a.isValid())return toastR({type:"error",title:"Fecha inv\xe1lida"}),!1;if(a.isBefore(l)||a.isAfter(o))return toastR({type:"warning",title:"Fecha fuera de rango"}),!1;let r=$(`form[name='${t}'], form#${t}`);return 0===r.length?(toastR({type:"error",title:"Formulario no encontrado",msg:`No se encontr\xf3 el formulario '${t}'.`}),!1):(r[0].submit(),!0)}function disableSelect2Option(e,t,n,a,l){let o=$(`#${e}`);if("string"==typeof t){let r=o.find(`option[value="${t}"]`);r.length&&(r.prop("disabled",!0),l&&r.attr("title",l),o.trigger("change.select2"))}else Array.isArray(t)?(t.forEach(e=>{let t=o.find(`option[value="${e}"]`);t.length&&(t.prop("disabled",!0),l&&t.attr("title",l))}),o.trigger("change.select2")):"object"==typeof t&&null!==t&&(Object.entries(t).forEach(([e,t])=>{let n=o.find(`option[value="${e}"]`);n.length&&(n.prop("disabled",!0),t&&n.attr("title",t))}),o.trigger("change.select2"))}